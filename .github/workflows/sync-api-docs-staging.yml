name: Sync staging docs in ReadMe 🦉

on:
  push:
    branches:
      # This workflow will run every time changes in the OpenAPI docs are
      # pushed to the `main` branch.
      - main
    paths:
      - 'openapiv2/core/**'
      - 'openapiv2/model/**'
      - 'openapiv2/vdp/**'


jobs:
  rdme-openapi:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo 📚
        uses: actions/checkout@v3

      - name: Sync Core 🔮
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/core/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca3f

      - name: Sync Model ⚗️
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/model/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca41

      - name: Sync VDP 💧
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/vdp/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca40
