name: Sync staging docs in ReadMe ğŸ¦‰

on:
  push:
    branches:
      # This workflow will run every time changes in the OpenAPI docs are
      # pushed to the `main` branch.
      - main
    paths:
      - 'openapiv2/core/**'
      - 'openapiv2/model/**'
      - 'openapiv2/vdp/**'


jobs:
  rdme-openapi:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo ğŸ“š
        uses: actions/checkout@v3

      - name: Sync Core ğŸ”®
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/core/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca3f

      - name: Sync Model âš—ï¸
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/model/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca41

      - name: Sync VDP ğŸ’§
        uses: readmeio/rdme@v8
        with:
          rdme: openapi openapiv2/vdp/service.swagger.yaml --key=${{ secrets.README_API_KEY }} --id=65ca17433dcd850078ffca40
